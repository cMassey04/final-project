{"ast":null,"code":"var _jsxFileName = \"/Users/jeremysamuel/Desktop/Spring 2024/FullstackDevelopment/Assignments/final-project/client/src/pages/login/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const {\n    loading,\n    dispatch\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [credentials, setCredentials] = useState({\n    username: undefined,\n    password: undefined\n  });\n  const handleChange = e => {\n    setCredentials(prev => ({\n      ...prev,\n      [e.target.id]: e.target.value\n    }));\n  };\n  const handleLogin = async e => {\n    e.preventDefault();\n    dispatch({\n      type: \"LOGIN_START\"\n    });\n    try {\n      // Simulate an API request to validate credentials\n      const res = await axios.post(\"http://localhost:4000/auth/login\", credentials);\n\n      // Assuming the response has a 'role' property that tells us whether the user is a freshman, sophomore, etc.\n      const userRole = res.data.role;\n      dispatch({\n        type: \"LOGIN_SUCCESS\",\n        payload: res.data\n      });\n\n      // Navigate based on the user's role\n      switch (userRole) {\n        case \"freshman\":\n          navigate(\"/freshman\");\n          break;\n        case \"sophomore\":\n          navigate(\"/sophomore\");\n          break;\n        case \"junior\":\n          navigate(\"/junior\");\n          break;\n        case \"senior\":\n          navigate(\"/senior\");\n          break;\n        default:\n          // If the role isn't recognized, redirect to a default page\n          navigate(\"/\");\n          break;\n      }\n    } catch (error) {\n      dispatch({\n        type: \"LOGIN_FAILURE\",\n        payload: error.response.data\n      });\n      if (error.response && error.response.status === 404) {\n        alert(\"User not found. Please check your credentials and try again.\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"email\",\n      id: \"email\",\n      onChange: handleChange,\n      className: \"lInput\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: \"password\",\n      id: \"password\",\n      onChange: handleChange,\n      className: \"lInput\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: loading,\n      onClick: handleLogin,\n      className: \"lButton\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"LlPVQ0Pc205xBnKbWyqUX2GF0Ew=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useContext","useState","AuthContext","useNavigate","axios","jsxDEV","_jsxDEV","LoginPage","_s","loading","dispatch","navigate","credentials","setCredentials","username","undefined","password","handleChange","e","prev","target","id","value","handleLogin","preventDefault","type","res","post","userRole","data","role","payload","error","response","status","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onChange","className","disabled","onClick","_c","$RefreshReg$"],"sources":["/Users/jeremysamuel/Desktop/Spring 2024/FullstackDevelopment/Assignments/final-project/client/src/pages/login/Login.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext.js\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst LoginPage = () => {\n  const { loading, dispatch } = useContext(AuthContext);\n  const navigate = useNavigate();\n\n  const [credentials, setCredentials] = useState({\n    username: undefined,\n    password: undefined,\n  });\n\n  const handleChange = (e) => {\n    setCredentials((prev) => ({ ...prev, [e.target.id]: e.target.value }));\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    dispatch({ type: \"LOGIN_START\" });\n\n    try {\n      // Simulate an API request to validate credentials\n      const res = await axios.post(\"http://localhost:4000/auth/login\", credentials);\n\n      // Assuming the response has a 'role' property that tells us whether the user is a freshman, sophomore, etc.\n      const userRole = res.data.role;\n\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\n\n      // Navigate based on the user's role\n      switch (userRole) {\n        case \"freshman\":\n          navigate(\"/freshman\");\n          break;\n        case \"sophomore\":\n          navigate(\"/sophomore\");\n          break;\n        case \"junior\":\n          navigate(\"/junior\");\n          break;\n        case \"senior\":\n          navigate(\"/senior\");\n          break;\n        default:\n          // If the role isn't recognized, redirect to a default page\n          navigate(\"/\");\n          break;\n      }\n    } catch (error) {\n      dispatch({ type: \"LOGIN_FAILURE\", payload: error.response.data });\n\n      if (error.response && error.response.status === 404) {\n        alert(\"User not found. Please check your credentials and try again.\");\n      } \n    }\n    \n  };\n\n  return (\n    <div>\n      <h2>Login Page</h2>\n      <input\n        type=\"text\"\n        placeholder=\"email\"\n        id=\"email\"\n        onChange={handleChange}\n        className=\"lInput\"\n      />\n      <input\n        type=\"password\"\n        placeholder=\"password\"\n        id=\"password\"\n        onChange={handleChange}\n        className=\"lInput\"\n      />\n      <button disabled={loading} onClick={handleLogin} className=\"lButton\">\n        Login\n      </button>\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}